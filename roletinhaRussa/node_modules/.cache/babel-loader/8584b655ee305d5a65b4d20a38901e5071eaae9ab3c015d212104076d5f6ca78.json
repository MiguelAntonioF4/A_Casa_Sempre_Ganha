{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useCallback } from 'react';\nexport const useStorage = () => {\n  _s();\n  const [leaderboard, setLeaderboard] = useState([]);\n\n  // Carregar dados salvos do jogo\n  const loadGameData = useCallback(async () => {\n    try {\n      const saved = await window.storage.get('casino-game-data');\n      if (saved && saved.value) {\n        return JSON.parse(saved.value);\n      }\n      return null;\n    } catch (error) {\n      console.log('Novo jogo iniciado');\n      return null;\n    }\n  }, []);\n\n  // Salvar dados do jogo\n  const saveGameData = useCallback(async gameData => {\n    try {\n      await window.storage.set('casino-game-data', JSON.stringify(gameData));\n    } catch (error) {\n      console.error('Erro ao salvar:', error);\n    }\n  }, []);\n\n  // Carregar leaderboard\n  const loadLeaderboard = useCallback(async () => {\n    try {\n      const result = await window.storage.get('casino-leaderboard', true);\n      if (result && result.value) {\n        setLeaderboard(JSON.parse(result.value));\n      }\n    } catch (error) {\n      console.log('Leaderboard vazio');\n    }\n  }, []);\n\n  // Atualizar leaderboard\n  const updateLeaderboard = useCallback(async (name, balance, rounds) => {\n    try {\n      let board = [...leaderboard];\n      const existingIndex = board.findIndex(p => p.name === name);\n      if (existingIndex >= 0) {\n        if (balance > board[existingIndex].maxBalance) {\n          board[existingIndex] = {\n            name,\n            maxBalance: balance,\n            rounds,\n            timestamp: Date.now()\n          };\n        }\n      } else {\n        board.push({\n          name,\n          maxBalance: balance,\n          rounds,\n          timestamp: Date.now()\n        });\n      }\n      board.sort((a, b) => b.maxBalance - a.maxBalance);\n      board = board.slice(0, 10);\n      setLeaderboard(board);\n      await window.storage.set('casino-leaderboard', JSON.stringify(board), true);\n    } catch (error) {\n      console.error('Erro ao atualizar leaderboard:', error);\n    }\n  }, [leaderboard]);\n\n  // Deletar dados salvos\n  const deleteGameData = useCallback(async () => {\n    try {\n      await window.storage.delete('casino-game-data');\n    } catch (error) {\n      console.error('Erro ao deletar dados:', error);\n    }\n  }, []);\n  useEffect(() => {\n    loadLeaderboard();\n  }, [loadLeaderboard]);\n  return {\n    leaderboard,\n    loadGameData,\n    saveGameData,\n    loadLeaderboard,\n    updateLeaderboard,\n    deleteGameData\n  };\n};\n_s(useStorage, \"i+NDCg/VPg4FP2fKVWtSrPlxvCk=\");","map":{"version":3,"names":["useState","useEffect","useCallback","useStorage","_s","leaderboard","setLeaderboard","loadGameData","saved","window","storage","get","value","JSON","parse","error","console","log","saveGameData","gameData","set","stringify","loadLeaderboard","result","updateLeaderboard","name","balance","rounds","board","existingIndex","findIndex","p","maxBalance","timestamp","Date","now","push","sort","a","b","slice","deleteGameData","delete"],"sources":["C:/Users/miguel.goncalves/Documents/FullStack/ACasaSempreGanha/roletinhaRussa/src/hooks/useStorage.js"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\r\n\r\nexport const useStorage = () => {\r\n  const [leaderboard, setLeaderboard] = useState([]);\r\n\r\n  // Carregar dados salvos do jogo\r\n  const loadGameData = useCallback(async () => {\r\n    try {\r\n      const saved = await window.storage.get('casino-game-data');\r\n      if (saved && saved.value) {\r\n        return JSON.parse(saved.value);\r\n      }\r\n      return null;\r\n    } catch (error) {\r\n      console.log('Novo jogo iniciado');\r\n      return null;\r\n    }\r\n  }, []);\r\n\r\n  // Salvar dados do jogo\r\n  const saveGameData = useCallback(async (gameData) => {\r\n    try {\r\n      await window.storage.set('casino-game-data', JSON.stringify(gameData));\r\n    } catch (error) {\r\n      console.error('Erro ao salvar:', error);\r\n    }\r\n  }, []);\r\n\r\n  // Carregar leaderboard\r\n  const loadLeaderboard = useCallback(async () => {\r\n    try {\r\n      const result = await window.storage.get('casino-leaderboard', true);\r\n      if (result && result.value) {\r\n        setLeaderboard(JSON.parse(result.value));\r\n      }\r\n    } catch (error) {\r\n      console.log('Leaderboard vazio');\r\n    }\r\n  }, []);\r\n\r\n  // Atualizar leaderboard\r\n  const updateLeaderboard = useCallback(async (name, balance, rounds) => {\r\n    try {\r\n      let board = [...leaderboard];\r\n      const existingIndex = board.findIndex(p => p.name === name);\r\n      \r\n      if (existingIndex >= 0) {\r\n        if (balance > board[existingIndex].maxBalance) {\r\n          board[existingIndex] = { name, maxBalance: balance, rounds, timestamp: Date.now() };\r\n        }\r\n      } else {\r\n        board.push({ name, maxBalance: balance, rounds, timestamp: Date.now() });\r\n      }\r\n      \r\n      board.sort((a, b) => b.maxBalance - a.maxBalance);\r\n      board = board.slice(0, 10);\r\n      \r\n      setLeaderboard(board);\r\n      await window.storage.set('casino-leaderboard', JSON.stringify(board), true);\r\n    } catch (error) {\r\n      console.error('Erro ao atualizar leaderboard:', error);\r\n    }\r\n  }, [leaderboard]);\r\n\r\n  // Deletar dados salvos\r\n  const deleteGameData = useCallback(async () => {\r\n    try {\r\n      await window.storage.delete('casino-game-data');\r\n    } catch (error) {\r\n      console.error('Erro ao deletar dados:', error);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadLeaderboard();\r\n  }, [loadLeaderboard]);\r\n\r\n  return {\r\n    leaderboard,\r\n    loadGameData,\r\n    saveGameData,\r\n    loadLeaderboard,\r\n    updateLeaderboard,\r\n    deleteGameData\r\n  };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}